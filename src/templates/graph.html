<!-- PAC Agent Profiler â€” Graph template (library) -->
<div style="position:relative;width:100%;height:100%;overflow:hidden" class="bg-cream text-ink font-sans">
  <!-- Canvas area -->
  <div class="absolute inset-0 top-[8vh] bottom-[14vh]" data-pac-viz></div>

  <div class="absolute top-5 left-5 z-10 pointer-events-auto">
    <h1 class="text-xl font-bold text-ink mb-0.5">Agent Profiler</h1>
    <div class="text-xs text-muted leading-relaxed" x-data x-text="
      $store.pac.cases.length === 0
        ? 'Start by adding use cases &rarr;'
        : $store.pac.layers.autonomy
          ? 'Autonomy determines how high each case can go'
          : 'Toggle Autonomy to see the 3D view'
    "></div>
  </div>

  <!-- Layer controls -->
  <div class="absolute bottom-5 left-5 z-10 flex gap-2 items-center flex-wrap" x-data>
    <span class="text-[10px] text-muted/60 font-mono mr-0.5">Layers</span>

    <div class="relative">
      <button
        @click="$store.pac.toggleLayer('autonomy')"
        :class="$store.pac.layers.autonomy
          ? 'border-navy/40 text-navy bg-navy/[0.08]'
          : 'border-border text-ink/60 bg-sand hover:text-ink hover:border-muted'"
        class="px-3 py-2 rounded border text-xs font-semibold cursor-pointer transition-all font-sans shadow-sm flex items-center gap-1.5"
      ><svg x-show="$store.pac.layers.autonomy" class="w-3.5 h-3.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg><svg x-show="!$store.pac.layers.autonomy" class="w-3.5 h-3.5 opacity-50" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/><line x1="1" y1="1" x2="23" y2="23"/></svg> Autonomy</button>

      <!-- Callout arrow -->
      <div
        x-show="!$store.pac.layers.autonomy && !$store.pac._autonomyClicked"
        x-transition:leave="transition ease-in duration-300"
        x-transition:leave-start="opacity-100"
        x-transition:leave-end="opacity-0"
        class="callout-arrow"
        style="bottom: calc(100% + 6px); left: 50%; transform: translateX(-50%);"
      >
        <span>Click to switch to 3D view!</span>
        <svg width="12" height="10" viewBox="0 0 12 10" fill="none">
          <path d="M6 10 L0 0 L12 0 Z" fill="#2d4a6f" opacity="0.5"/>
        </svg>
      </div>
    </div>

    <button
      @click="$store.pac.layers.autonomy && $store.pac.toggleLayer('surface')"
      :class="$store.pac.layers.surface
        ? 'border-navy/40 text-navy bg-navy/[0.08]'
        : 'border-border text-ink/60 bg-sand hover:text-ink hover:border-muted'"
      :style="{ opacity: $store.pac.layers.autonomy ? 1 : 0.3 }"
      class="px-3 py-2 rounded border text-xs font-semibold cursor-pointer transition-all font-sans shadow-sm flex items-center gap-1.5"
    ><svg x-show="$store.pac.layers.surface" class="w-3.5 h-3.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg><svg x-show="!$store.pac.layers.surface" class="w-3.5 h-3.5 opacity-50" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/><line x1="1" y1="1" x2="23" y2="23"/></svg> Thresholds</button>
  </div>

  <!-- Compact inline legend -->
  <div x-data class="absolute bottom-7 right-3 z-10 max-md:hidden flex items-center gap-3">
    <div class="flex items-center gap-2.5">
      <span class="flex items-center gap-1"><span class="w-2 h-2 rounded-full inline-block" style="background:#10b981"></span><span class="text-[9px] font-mono text-muted">Pass</span></span>
      <span class="flex items-center gap-1"><span class="w-2 h-2 rounded-full inline-block" style="background:#ef4444"></span><span class="text-[9px] font-mono text-muted">Fail</span></span>
      <span class="text-muted/20">|</span>
      <span class="text-[9px] font-mono text-muted/50">size = value</span>
      <span class="flex items-center gap-0.5"><span class="w-1 h-1 rounded-full inline-block bg-muted/30"></span><span class="w-1.5 h-1.5 rounded-full inline-block bg-muted/30"></span><span class="w-2 h-2 rounded-full inline-block bg-muted/30"></span><span class="w-2.5 h-2.5 rounded-full inline-block bg-muted/30"></span></span>
    </div>
    <span x-show="!$store.pac.layers.autonomy" class="flex items-center gap-2">
      <span class="text-muted/20">|</span>
      <span class="flex items-center gap-1"><span class="w-3 border-t" style="border-color:#93c5fd"></span><span class="text-[9px] font-mono" style="color:#93c5fd">A1</span></span>
      <span class="flex items-center gap-1"><span class="w-3 border-t border-dashed" style="border-color:#60a5fa"></span><span class="text-[9px] font-mono" style="color:#60a5fa">A2</span></span>
      <span class="flex items-center gap-1"><span class="w-3 border-t border-dashed" style="border-color:#3b82f6"></span><span class="text-[9px] font-mono" style="color:#3b82f6">A3</span></span>
      <span class="flex items-center gap-1"><span class="w-3 border-t border-dashed" style="border-color:#2563eb"></span><span class="text-[9px] font-mono" style="color:#2563eb">A4</span></span>
      <span class="flex items-center gap-1"><span class="w-3 border-t border-dashed" style="border-color:#1d4ed8"></span><span class="text-[9px] font-mono" style="color:#1d4ed8">A5</span></span>
    </span>
    <button @click="window.__showHelp && window.__showHelp()" class="w-5 h-5 rounded-full border border-border text-[10px] text-muted/50 flex items-center justify-center cursor-pointer hover:border-muted hover:text-muted transition-all">?</button>
  </div>

  <div class="absolute bottom-2 right-3 z-10 flex items-center gap-2.5 max-md:hidden">
    <span class="text-xs text-muted font-mono">drag rotate &middot; scroll zoom</span>
  </div>

  <!-- Top-right links -->
  <div class="absolute right-5 top-6 z-20 flex gap-3 max-md:hidden">
    <a
      onclick="document.querySelector('[data-pac-howto]').classList.remove('hidden')"
      href="#"
      class="text-xs text-muted hover:text-navy cursor-pointer transition-colors font-mono underline underline-offset-3 decoration-border hover:decoration-navy/40"
    >How to use</a>
  </div>

  <div class="tip" data-pac-tip></div>
</div>
